<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>map-merge-args.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-BatchWriteItem.html">BatchWriteItem</a><ul class='methods'><li data-type='method'><a href="module-BatchWriteItem.html#~batchInsertFor">batchInsertFor</a></li><li data-type='method'><a href="module-BatchWriteItem.html#~batchRemoveFor">batchRemoveFor</a></li><li data-type='method'><a href="module-BatchWriteItem.html#~batchWriteFor">batchWriteFor</a></li></ul></li><li><a href="module-Count.html">Count</a><ul class='methods'><li data-type='method'><a href="module-Count.html#~count">count</a></li><li data-type='method'><a href="module-Count.html#~countFor">countFor</a></li></ul></li><li><a href="module-GetItem.html">GetItem</a><ul class='methods'><li data-type='method'><a href="module-GetItem.html#~get">get</a></li><li data-type='method'><a href="module-GetItem.html#~getFor">getFor</a></li></ul></li><li><a href="module-Scan.html">Scan</a><ul class='methods'><li data-type='method'><a href="module-Scan.html#~getAll">getAll</a></li><li data-type='method'><a href="module-Scan.html#~getAllFor">getAllFor</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#createFlynamo">createFlynamo</a></li><li><a href="global.html#forTable">forTable</a></li><li><a href="global.html#insert">insert</a></li><li><a href="global.html#mergeDeepAll">mergeDeepAll</a></li><li><a href="global.html#mergeN">mergeN</a></li><li><a href="global.html#overFirst">overFirst</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#update">update</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">map-merge-args.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
const {
  compose,
  unapply,
  concat,
  of,
  converge,
  lensIndex,
  reduce,
  mergeDeepLeft,
  over,
  take,
  drop,
  partial,
  map,
  call,
  head,
  last,
  zip
} = require('ramda');
const castArray = require('./cast-array');

/**
 * Returns deeply merged object by merging all objects in a passed list. Merging is applied from the left.
 * See mergeDeepLeft from Ramda.
 *
 * @see https://ramdajs.com/docs/#mergeDeepLeft
 * @param {Array} list Array of objects
 * @returns {Object} Merged object
 *
 * @example
 * 		const a = { fooA: { bar: 'a' }, shared: { baz: 1 } };
 * 		const b = { fooB: { bar: 'b' }, shared: { baz: 2 } };
 * 		const c = { fooC: { bar: 'c' }, shared: { baz: 3 } };
 *
 * 		mergeDeepAll([a, b, c])
 * 		// {
 * 	 	// 	fooA: { bar: 'a' },
 * 		// 	fooB: { bar: 'b' },
 * 		// 	fooC: { bar: 'c' },
 * 		// 	shared: { baz: 1 },
 * 		// }
 */
const mergeDeepAll = reduce(mergeDeepLeft, {});

/**
 * Takes the first N elements of an array and shallow merge them
 * together, while leaving the rest untouched.
 *
 * ```
 * mergeN(2)([{ foo: 'bar' }, { baz: 'db' }, 42]);
 * // -> [{ foo: 'bar', baz: 'db' }, 42]
 * ```
 */
const mergeN = n =>
  converge(concat, [
    compose(
      of,
      mergeDeepAll,
      take(n)
    ),
    drop(n)
  ]);

/**
 * Updates the first element of the input array and returns a new array
 * with the modifications.
 *
 * ```
 * overFirst(R.add(2))([1, 2, 4]);
 * // -> [3, 2, 4]
 * ```
 *
 * @param {Function} fn The function to execute on first element of array
 */
const overFirst = fn => over(lensIndex(0), fn);

/**
 * Applies a list of functions to a list of values with corresponding indices
 * and returns the resulting list. Any values that do not have a matching mapping
 * function (i.e.: there are more values than functions), are returned as is.
 *
 * @private
 * @example
 *
 *  overAll([R.add(1), R.add(2)])([2, 3, 4])
 *  // -> [3, 5, 4]
 *
 * @param {Array&lt;Function>} fns A list of functions to apply to list of values
 */
const overAll = fns =>
  converge(concat, [
    compose(
      map(converge(call, [head, last])),
      zip(fns),
      take(fns.length)
    ),
    drop(fns.length)
  ]);

/**
 * Returns a variadic function that expects arbitrary arguments and map those one by one
 * by applying functions in `fns` (first function in `fns` transforms first argument, etc.)
 * and collecting them in an array.
 * After that, the first `n` elements of the resulting array are shallowly merged. All
 * remaining elements are returned as-is.
 *
 * @private
 * @example
 *
 *  mapMergeNArgs(2, [R.pick(['foo']), R.pick(['bar'])])({foo: 42, bar: false}, { foo: 101, bar: true }, { baz: 33 })
 *  // -> [{ foo: 42, bar: true }, { baz: 33 }]
 *
 * @param {Number} n The number elements to merge
 * @param {Function} fns A list of mapping function to apply to input.
 */
const mapMergeNArgs = (n, fns) =>
  unapply(
    compose(
      mergeN(n),
      overAll(castArray(fns))
    )
  );

/**
 * Returns a function that passes its first argument to `fn`. The result of `fn`
 * is, then, merged with the second argument of the original function which is then call
 * with it.
 *
 * @private
 * @param {Function} fn The mapping function to apply to the first argument
 */
const mapMergeFirstPairOfArgs = partial(mapMergeNArgs, [2]);

module.exports = {
  overFirst,
  overAll,
  mapMergeFirstPairOfArgs,
  mapMergeNArgs
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Jul 06 2018 13:12:23 GMT+0100 (Irish Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
